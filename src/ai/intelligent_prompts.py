"""
–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ —Å—Ç–∏–ª–µ "–ö–≤–∏–∑, –ø–ª–∏–∑!"
"""

from typing import Dict, List
from src.models.types import QuestionType, Difficulty


class IntelligentPrompts:
    """–°–∏—Å—Ç–µ–º–∞ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤"""
    
    @staticmethod
    def get_question_type_examples(question_type: QuestionType) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–æ–≤"""
        
        examples = {
            QuestionType.RIDDLE: """
üß© –ó–ê–ì–ê–î–ö–ò –° –ü–û–î–í–û–•–û–ú:
- "–ß—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—à–µ, –µ—Å–ª–∏ –µ–≥–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤–≤–µ—Ä—Ö –Ω–æ–≥–∞–º–∏?"
  ‚Üí "–ß–∏—Å–ª–æ 6 (—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 9)"
- "–ß—Ç–æ –º–æ–∂–Ω–æ —Å–ª–æ–º–∞—Ç—å, –Ω–µ –ø—Ä–∏–∫–∞—Å–∞—è—Å—å –∫ –Ω–µ–º—É?"
  ‚Üí "–û–±–µ—â–∞–Ω–∏–µ"
- "–ß–µ–º –±–æ–ª—å—à–µ –∏–∑ –Ω–µ—ë –±–µ—Ä—ë—à—å, —Ç–µ–º –±–æ–ª—å—à–µ –æ–Ω–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è?"
  ‚Üí "–Ø–º–∞"
""",
            
            QuestionType.ETYMOLOGY: """
üî§ –≠–¢–ò–ú–û–õ–û–ì–ò–ß–ï–°–ö–ò–ï –í–û–ü–†–û–°–´:
- "–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –≥—Ä–∏–≤–Ω—É —Ä—É–±–∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ–Ω—è–ª—ã –Ω–∞ —Å–∫–∞–º—å—è—Ö. –ö–∞–∫–æ–µ —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ –æ—Ç—Å—é–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–æ?"
  ‚Üí "–ë–∞–Ω–∫ (–æ—Ç –Ω–µ–º. Bank ‚Äî —Å–∫–∞–º—å—è)"
- "–ü–æ—á–µ–º—É –∑–∞—Ä–ø–ª–∞—Ç—É –Ω–∞–∑—ã–≤–∞—é—Ç 'salary'?"
  ‚Üí "–û—Ç –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ 'salarium' - —Å–æ–ª—å, –∫–æ—Ç–æ—Ä–æ–π –ø–ª–∞—Ç–∏–ª–∏ —Ä–∏–º—Å–∫–∏–º —Å–æ–ª–¥–∞—Ç–∞–º"
- "–û—Ç–∫—É–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å–ª–æ–≤–æ '—Ö—É–ª–∏–≥–∞–Ω'?"
  ‚Üí "–û—Ç —Ñ–∞–º–∏–ª–∏–∏ –∏—Ä–ª–∞–Ω–¥—Å–∫–æ–π —Å–µ–º—å–∏ Hooligan, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –±—É–π–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º"
""",
            
            QuestionType.HISTORICAL_TWIST: """
üèõÔ∏è –ò–°–¢–û–†–ò–ß–ï–°–ö–ò–ï –° –ü–û–í–û–†–û–¢–û–ú:
- "–í –°–®–ê –≤ XIX –≤–µ–∫–µ –±–µ–≥–ª—ã–µ —Ä–∞–±—ã —Å–æ–≤–µ—Ä—à–∞–ª–∏ –≤–æ—Ä–æ–≤—Å—Ç–≤–æ —Å–∞–º–∏–º —Ñ–∞–∫—Ç–æ–º –ø–æ–±–µ–≥–∞. –ß—Ç–æ –≤–æ—Ä–æ–≤–∞–ª–∏?"
  ‚Üí "–°–µ–±—è (—É —Ä–∞–±–æ–≤–ª–∞–¥–µ–ª—å—Ü–∞)"
- "–ü–æ—á–µ–º—É –ù–∞–ø–æ–ª–µ–æ–Ω –≤—Å–µ–≥–¥–∞ –¥–µ—Ä–∂–∞–ª —Ä—É–∫—É –∑–∞ –∂–∏–ª–µ—Ç–æ–º?"
  ‚Üí "–ú–æ–¥–Ω–∞—è –ø–æ–∑–∞ —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –ø–æ—Ä—Ç—Ä–µ—Ç–æ–≤"
- "–ö–∞–∫–æ–π –ø—Ä–æ–¥—É–∫—Ç –≤ —Å—Ä–µ–¥–Ω–µ–≤–µ–∫–æ–≤—å–µ –±—ã–ª –¥–æ—Ä–æ–∂–µ –∑–æ–ª–æ—Ç–∞?"
  ‚Üí "–®–∞—Ñ—Ä–∞–Ω"
""",
            
            QuestionType.LOGIC_PUZZLE: """
üß† –õ–û–ì–ò–ß–ï–°–ö–ò–ï –ì–û–õ–û–í–û–õ–û–ú–ö–ò:
- "–ï—Å–ª–∏ –ø–æ–∑–∞–≤—á–µ—Ä–∞ –±—ã–ª–∞ –ø—è—Ç–Ω–∏—Ü–∞, —Ç–æ –∫–∞–∫–æ–π –¥–µ–Ω—å –±—É–¥–µ—Ç –ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞?"
  ‚Üí "–°—Ä–µ–¥–∞"
- "–í –∫–æ–º–Ω–∞—Ç–µ 4 —É–≥–ª–∞. –í –∫–∞–∂–¥–æ–º —É–≥–ª—É —Å–∏–¥–∏—Ç –∫–æ—à–∫–∞. –ù–∞–ø—Ä–æ—Ç–∏–≤ –∫–∞–∂–¥–æ–π –∫–æ—à–∫–∏ - 3 –∫–æ—à–∫–∏. –°–∫–æ–ª—å–∫–æ –∫–æ—à–µ–∫?"
  ‚Üí "4 –∫–æ—à–∫–∏"
- "–ß—Ç–æ —Ç—è–∂–µ–ª–µ–µ: –∫–∏–ª–æ–≥—Ä–∞–º–º –∂–µ–ª–µ–∑–∞ –∏–ª–∏ –∫–∏–ª–æ–≥—Ä–∞–º–º –ø—É—Ö–∞?"
  ‚Üí "–û–¥–∏–Ω–∞–∫–æ–≤–æ (–ø–æ –∫–∏–ª–æ–≥—Ä–∞–º–º—É)"
""",
            
            QuestionType.CULTURAL_REFERENCE: """
üé≠ –ö–£–õ–¨–¢–£–†–ù–´–ï –û–¢–°–´–õ–ö–ò:
- "–ö–∞–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—à–ª–æ –æ—Ç –ø—Ä–∏–≤—ã—á–∫–∏ —Ä—É—Å—Å–∫–∏—Ö —Ü–∞—Ä–µ–π –ª–æ–º–∞—Ç—å –ø–µ—Ä—å—è –ø–æ—Å–ª–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏—è —Å–º–µ—Ä—Ç–Ω—ã—Ö –ø—Ä–∏–≥–æ–≤–æ—Ä–æ–≤?"
  ‚Üí "–ü–µ—Ä–æ —Å–ª–æ–º–∞—Ç—å"
- "–ü–æ—á–µ–º—É –≥–æ–≤–æ—Ä—è—Ç '–¥–æ–π—Ç–∏ –¥–æ —Ä—É—á–∫–∏'?"
  ‚Üí "–û—Ç –∫–∞–ª–∞—á–µ–π —Å —Ä—É—á–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ–ª–∏ –±–µ–¥–Ω—è–∫–∏"
- "–û—Ç–∫—É–¥–∞ –ø–æ—à–ª–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ '–±–∏—Ç—å –±–∞–∫–ª—É—à–∏'?"
  ‚Üí "–û—Ç –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –¥–µ—Ä–µ–≤—è–Ω–Ω—ã—Ö –∑–∞–≥–æ—Ç–æ–≤–æ–∫ –¥–ª—è –ª–æ–∂–µ–∫"
""",
            
            QuestionType.HIDDEN_CLUE: """
üîç –ü–û–î–°–ö–ê–ó–ö–ê –í –¢–ï–ö–°–¢–ï:
- "–í 1947 –≥–æ–¥—É –≤ –≥–∞–∑–µ—Ç–∞—Ö —Å–æ–æ–±—â–∏–ª–∏ –æ —Å–º–µ—Ä—Ç–∏ –≥—Ä–µ—á–µ—Å–∫–æ–≥–æ –∫–æ—Ä–æ–ª—è. –ú–Ω–æ–≥–∏–µ –Ω–µ –≤–µ—Ä–∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π. –ö–æ–≥–¥–∞ –æ–Ω —É–º–µ—Ä?"
  ‚Üí "1 –∞–ø—Ä–µ–ª—è (–Ω–∞–º—ë–∫ –Ω–∞ —Ä–æ–∑—ã–≥—Ä—ã—à)"
- "–≠—Ç–æ—Ç –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä –Ω–∞–ø–∏—Å–∞–ª '–õ—É–Ω–Ω—É—é —Å–æ–Ω–∞—Ç—É' –¥–ª—è —Å–≤–æ–µ–π –≥–ª—É—Ö–æ–π —É—á–µ–Ω–∏—Ü—ã. –ö—Ç–æ –æ–Ω?"
  ‚Üí "–ë–µ—Ç—Ö–æ–≤–µ–Ω (–Ω–∞–º—ë–∫ –Ω–∞ –≥–ª—É—Ö–æ—Ç—É)"
- "–°—Ç—Ä–∞–Ω–∞, –≥–¥–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞—Ö–æ–¥–∏—Ç —Å–æ–ª–Ω—Ü–µ. –ì–¥–µ —ç—Ç–æ?"
  ‚Üí "–ë—Ä–∏—Ç–∞–Ω—Å–∫–∞—è –∏–º–ø–µ—Ä–∏—è (–Ω–∞–º—ë–∫ –Ω–∞ –∫–æ–ª–æ–Ω–∏–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É)"
""",
            
            QuestionType.UNEXPECTED_ANSWER: """
üò≤ –ù–ï–û–ñ–ò–î–ê–ù–ù–´–ô –û–¢–í–ï–¢:
- "–ß—Ç–æ –æ–±—â–µ–≥–æ –º–µ–∂–¥—É –∑–µ–±—Ä–æ–π –∏ —à—Ç—Ä–∏—Ö-–∫–æ–¥–æ–º?"
  ‚Üí "–ß—ë—Ä–Ω–æ-–±–µ–ª—ã–µ –ø–æ–ª–æ—Å—ã –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"
- "–ü–æ—á–µ–º—É –≤ –ª–∏—Ñ—Ç–∞—Ö —Å—Ç–∞–≤—è—Ç –∑–µ—Ä–∫–∞–ª–∞?"
  ‚Üí "–ß—Ç–æ–±—ã –ª—é–¥–∏ –Ω–µ –∑–∞–º–µ—á–∞–ª–∏ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è"
- "–ß—Ç–æ –∏–∑–æ–±—Ä–µ–ª–∏ —Ä–∞–Ω—å—à–µ: –∑–∞–∂–∏–≥–∞–ª–∫—É –∏–ª–∏ —Å–ø–∏—á–∫–∏?"
  ‚Üí "–ó–∞–∂–∏–≥–∞–ª–∫—É (1823 vs 1826)"
""",
            
            QuestionType.STANDARD: """
üìö –°–¢–ê–ù–î–ê–†–¢–ù–´–ô –ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–´–ô –í–û–ü–†–û–°:
- "–ö–∞–∫–æ–π –≥–æ—Ä–æ–¥ —Å—Ç–∞–ª —Å—Ç–æ–ª–∏—Ü–µ–π –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ?"
  ‚Üí "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥"
- "–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å –¢–∏—Ç–∞–Ω–∏–∫–æ–º –≤ –µ–≥–æ –ø–µ—Ä–≤–æ–º –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø–ª–∞–≤–∞–Ω–∏–∏?"
  ‚Üí "–û–Ω –∑–∞—Ç–æ–Ω—É–ª"
- "–ö–∞–∫–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ —è–≤–ª—è–µ—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º –º—É–¥—Ä–æ—Å—Ç–∏ –≤ –≥—Ä–µ—á–µ—Å–∫–æ–π –º–∏—Ñ–æ–ª–æ–≥–∏–∏?"
  ‚Üí "–°–æ–≤–∞"
"""
        }
        
        return examples.get(question_type, examples[QuestionType.RIDDLE])
    
    @staticmethod
    def get_difficulty_modifiers(difficulty: Difficulty) -> Dict[str, str]:
        """–ü–æ–ª—É—á–∏—Ç—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏"""
        
        modifiers = {
            Difficulty.EASY: {
                "instruction": "–î–µ–ª–∞–π –≤–æ–ø—Ä–æ—Å—ã –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —à–∏—Ä–æ–∫–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏",
                "hint_level": "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—á–µ–≤–∏–¥–Ω—ã–º–∏",
                "knowledge_level": "–û–±—â–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–∞–∫—Ç—ã —Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –ø–æ–¥–∞—á–µ–π",
                "thinking_time": "–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –±—ã—Å—Ç—Ä–æ –ø—Ä–∏ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–∏"
            },
            
            Difficulty.MEDIUM: {
                "instruction": "–ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é",
                "hint_level": "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–º—É –∏–≥—Ä–æ–∫—É",
                "knowledge_level": "–¢—Ä–µ–±—É–π —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π, –Ω–æ –Ω–µ —É–∑–∫–∏—Ö –∑–Ω–∞–Ω–∏–π",
                "thinking_time": "–ú–æ–º–µ–Ω—Ç '–ê–≥–∞! –¢–æ—á–Ω–æ!' –ø–æ—Å–ª–µ –æ–±–¥—É–º—ã–≤–∞–Ω–∏—è"
            },
            
            Difficulty.HARD: {
                "instruction": "–¢—Ä–µ–±—É–π –≥–ª—É–±–æ–∫–∏—Ö –∑–Ω–∞–Ω–∏–π –∏–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è",
                "hint_level": "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–≤—É–∞–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏",
                "knowledge_level": "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏–ª–∏ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞",
                "thinking_time": "–ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ª–≥–æ–≥–æ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è"
            }
        }
        
        return modifiers.get(difficulty, modifiers[Difficulty.MEDIUM])
    
    @staticmethod
    def get_theme_specific_instructions(theme: str) -> str:
        """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ–º—ã"""
        
        theme_lower = theme.lower()
        
        if "–∏—Å—Ç–æ—Ä" in theme_lower:
            return """
üèõÔ∏è –ò–°–¢–û–†–ò–Ø - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:
- –ò—Å–ø–æ–ª—å–∑—É–π –º–∞–ª–æ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ —Ñ–∞–∫—Ç—ã –∏–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –î–æ–±–∞–≤–ª—è–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º —Ñ–∏–≥—É—Ä–∞–º
- –°–≤—è–∑—ã–≤–∞–π –ø—Ä–æ—à–ª–æ–µ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å—é
- –ò—Å–ø–æ–ª—å–∑—É–π –ø–∞—Ä–∞–¥–æ–∫—Å—ã –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏
- –ò–∑–±–µ–≥–∞–π —Å—É—Ö–∏—Ö –¥–∞—Ç - —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –¥–µ—Ç–∞–ª—è—Ö
"""
        
        elif "–∫–∏–Ω–æ" in theme_lower or "—Ñ–∏–ª—å–º" in theme_lower:
            return """
üé¨ –ö–ò–ù–û - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:
- –ò—Å–ø–æ–ª—å–∑—É–π —Ñ–∞–∫—Ç—ã —Å–æ —Å—ä—ë–º–æ–∫, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å—é–∂–µ—Ç
- –î–æ–±–∞–≤–ª—è–π —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ–∏–ª—å–º–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é
- –ò—Å–ø–æ–ª—å–∑—É–π —Ü–∏—Ç–∞—Ç—ã –∫–∞–∫ –ø–æ–¥—Å–∫–∞–∑–∫–∏
- –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –¥–µ—Ç–∞–ª—è—Ö –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞
- –ò–∑–±–µ–≥–∞–π –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –æ —Å—é–∂–µ—Ç–µ
"""
        
        elif "—Å–ø–æ—Ä—Ç" in theme_lower:
            return """
‚öΩ –°–ü–û–†–¢ - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:
- –ò—Å–ø–æ–ª—å–∑—É–π –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∞–≤–∏–ª –∏ —Ç—Ä–∞–¥–∏—Ü–∏–π
- –î–æ–±–∞–≤–ª—è–π –Ω–µ–æ–±—ã—á–Ω—ã–µ —Ñ–∞–∫—Ç—ã –æ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞—Ö
- –°–≤—è–∑—ã–≤–∞–π —Å–ø–æ—Ä—Ç —Å –∫—É–ª—å—Ç—É—Ä–æ–π –∏ –æ–±—â–µ—Å—Ç–≤–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π –ø–∞—Ä–∞–¥–æ–∫—Å—ã –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏
- –ò–∑–±–µ–≥–∞–π –ø—Ä–æ—Å—Ç–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
"""
        
        elif "–Ω–∞—É–∫–∞" in theme_lower:
            return """
üî¨ –ù–ê–£–ö–ê - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç–µ–æ—Ä–∏–π
- –î–æ–±–∞–≤–ª—è–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–∫—Ä—ã—Ç–∏–π
- –°–≤—è–∑—ã–≤–∞–π –Ω–∞—É–∫—É —Å –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –∂–∏–∑–Ω—å—é
- –ò—Å–ø–æ–ª—å–∑—É–π –ø–∞—Ä–∞–¥–æ–∫—Å—ã –∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Ñ–∞–∫—Ç—ã
- –ò–∑–±–µ–≥–∞–π —Å—É—Ö–∏—Ö —Ñ–æ—Ä–º—É–ª - —Ñ–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–∏
"""
        
        else:
            return """
üß† –û–ë–©–ò–ï –ó–ù–ê–ù–ò–Ø - –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:
- –ö–æ–º–±–∏–Ω–∏—Ä—É–π –∑–Ω–∞–Ω–∏—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ–∞–∫—Ç–∞–º–∏
- –î–æ–±–∞–≤–ª—è–π —ç–ª–µ–º–µ–Ω—Ç—ã –ª–æ–≥–∏–∫–∏ –∏ –¥–µ–¥—É–∫—Ü–∏–∏
- –§–æ–∫—É—Å–∏—Ä—É–π—Å—è –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –¥–µ—Ç–∞–ª—è—Ö
- –ò–∑–±–µ–≥–∞–π –±–∞–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤
"""
    
    @staticmethod
    def build_intelligent_prompt(theme: str, difficulty: Difficulty, 
                                question_type: QuestionType, 
                                questions_count: int) -> str:
        """–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤"""
        
        type_examples = IntelligentPrompts.get_question_type_examples(question_type)
        difficulty_mods = IntelligentPrompts.get_difficulty_modifiers(difficulty)
        theme_instructions = IntelligentPrompts.get_theme_specific_instructions(theme)
        
        return f"""
üéØ –ó–ê–î–ê–ß–ê: –°–æ–∑–¥–∞–π {questions_count} –ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–´–• –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–∏–ø–∞ "{question_type.value}"

üìä –ü–ê–†–ê–ú–ï–¢–†–´:
- –¢–µ–º–∞: {theme}
- –°–ª–æ–∂–Ω–æ—Å—Ç—å: {difficulty.value}
- –¢–∏–ø –≤–æ–ø—Ä–æ—Å–æ–≤: {question_type.value}

üß† –ü–†–ò–ù–¶–ò–ü–´ –°–û–ó–î–ê–ù–ò–Ø:
1. üé™ –ü–†–û–í–û–¶–ò–†–£–ô –†–ê–ó–ú–´–®–õ–ï–ù–ò–Ø - –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–π –ø–∞–º—è—Ç—å
2. üé≠ –î–û–ë–ê–í–õ–Ø–ô –≠–õ–ï–ú–ï–ù–¢ –ù–ï–û–ñ–ò–î–ê–ù–ù–û–°–¢–ò –∏–ª–∏ –ø–æ–¥–≤–æ—Ö–∞
3. üß© –î–ï–õ–ê–ô –ú–ù–û–ì–û–°–õ–û–ô–ù–´–ú–ò - —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –≤ —Ç–µ–∫—Å—Ç–µ
4. üá∑üá∫ –£–ß–ò–¢–´–í–ê–ô —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—É—é –∫—É–ª—å—Ç—É—Ä—É
5. ‚úÖ –û–ë–ï–°–ü–ï–ß–¨ —Ç–æ—á–Ω—ã–π, –æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–π –æ—Ç–≤–µ—Ç

{type_examples}

üéØ –¢–†–ï–ë–û–í–ê–ù–ò–Ø –ö –°–õ–û–ñ–ù–û–°–¢–ò ({difficulty.value}):
- {difficulty_mods['instruction']}
- {difficulty_mods['hint_level']}
- {difficulty_mods['knowledge_level']}
- {difficulty_mods['thinking_time']}

{theme_instructions}

üìù –§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê: JSON-–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–æ–ª—è–º–∏:
- question: —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
- answer: —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç
- difficulty: —É—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- question_type: —Ç–∏–ø –≤–æ–ø—Ä–æ—Å–∞
- explanation: –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
- hints: –º–∞—Å—Å–∏–≤ –ø–æ–¥—Å–∫–∞–∑–æ–∫ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)

‚ö†Ô∏è –í–ê–ñ–ù–û: –í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON-–º–∞—Å—Å–∏–≤, –±–µ–∑ –æ–±—ë—Ä—Ç–∫–∏!
""" 