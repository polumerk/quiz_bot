# ğŸ¯ UML Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ Ğ¸ ÑÑ…ĞµĞ¼Ñ‹ Quiz Bot 2.0

## ğŸ“ Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ĞºĞ»Ğ°ÑÑĞ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            CLASS DIAGRAM                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                           MODELS LAYER                                  â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚     GameState       â”‚   â”‚     Question        â”‚   â”‚   Participant   â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ - settings          â”‚   â”‚ - question: str     â”‚   â”‚ - user_id: int  â”‚â”‚â”‚
â”‚  â”‚  â”‚ - participants      â”‚   â”‚ - correct_answer    â”‚   â”‚ - username: str â”‚â”‚â”‚
â”‚  â”‚  â”‚ - current_round     â”‚   â”‚ - difficulty        â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ - question_index    â”‚   â”‚ - explanation       â”‚   â”‚ + __hash__()    â”‚â”‚â”‚
â”‚  â”‚  â”‚ - questions[]       â”‚   â”‚                     â”‚   â”‚ + __eq__()      â”‚â”‚â”‚
â”‚  â”‚  â”‚ - awaiting_answer   â”‚   â”‚ + from_dict()       â”‚   â”‚ + to_tuple()    â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚ + to_dict()         â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + add_participant() â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + start_question()  â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + next_question()   â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + add_user_answer() â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚    GameSettings     â”‚   â”‚       Answer        â”‚   â”‚   GameResult    â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ - mode: GameMode    â”‚   â”‚ - user_id: int      â”‚   â”‚ - question      â”‚â”‚â”‚
â”‚  â”‚  â”‚ - difficulty        â”‚   â”‚ - username: str     â”‚   â”‚ - answer        â”‚â”‚â”‚
â”‚  â”‚  â”‚ - rounds: int       â”‚   â”‚ - answer_text: str  â”‚   â”‚ - explanation   â”‚â”‚â”‚
â”‚  â”‚  â”‚ - questions_per_r   â”‚   â”‚ - is_correct: bool  â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ - time_per_question â”‚   â”‚ - time_to_answer    â”‚   â”‚ + to_dict()     â”‚â”‚â”‚
â”‚  â”‚  â”‚ - theme: str        â”‚   â”‚ - fast_bonus: bool  â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + get_fast_bonus()  â”‚   â”‚ + to_dict()         â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                         GAME LOGIC LAYER                                â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚    game.logic       â”‚   â”‚    questions.py     â”‚   â”‚  handlers.*     â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + start_round()     â”‚   â”‚ + openai_generate   â”‚   â”‚ + commands      â”‚â”‚â”‚
â”‚  â”‚  â”‚ + ask_next_quest()  â”‚   â”‚ + build_openai_prmt â”‚   â”‚ + callbacks     â”‚â”‚â”‚
â”‚  â”‚  â”‚ + question_timeout()â”‚   â”‚ + openai_check_ans  â”‚   â”‚ + messages      â”‚â”‚â”‚
â”‚  â”‚  â”‚ + finish_round()    â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                         DATA STORAGE LAYER                             â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚       db.py         â”‚   â”‚  questions_history  â”‚   â”‚   game_states   â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + init_db()         â”‚   â”‚ - id                â”‚   â”‚ - chat_id       â”‚â”‚â”‚
â”‚  â”‚  â”‚ + get_questions_h() â”‚   â”‚ - theme             â”‚   â”‚ - game_state    â”‚â”‚â”‚
â”‚  â”‚  â”‚ + add_question_h()  â”‚   â”‚ - question          â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + get_last_game()   â”‚   â”‚ - created_at        â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + insert_answers()  â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ + update_stats()    â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        QUESTION GENERATION SEQUENCE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User        Bot         GameLogic    Questions     OpenAI      Database    â”‚
â”‚   â”‚           â”‚             â”‚            â”‚           â”‚            â”‚         â”‚
â”‚   â”‚ /start    â”‚             â”‚            â”‚           â”‚            â”‚         â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚            â”‚           â”‚            â”‚         â”‚
â”‚   â”‚           â”‚ setup_game()â”‚            â”‚           â”‚            â”‚         â”‚
â”‚   â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚            â”‚           â”‚            â”‚         â”‚
â”‚   â”‚           â”‚             â”‚get_history()          â”‚            â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚         â”‚
â”‚   â”‚           â”‚             â”‚            â”‚           â”‚    historyâ”‚         â”‚
â”‚   â”‚           â”‚             â”‚            â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚   â”‚           â”‚             â”‚start_round()          â”‚            â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚          â”‚            â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚generate_ â”‚            â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚questions()            â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚           â”‚ API call  â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶ â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚           â”‚ response  â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚parse &    â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚validate   â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚           â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚save_to_history()       â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚         â”‚
â”‚   â”‚           â”‚             â”‚ask_next_question()     â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚ display_q() â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚ "Question"â”‚             â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚ reply     â”‚             â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚ answer_handler()          â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚             â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚check_answer()          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚          â”‚           â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚fuzzy_match()        â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚update_scores()         â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚          â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚save_answer()           â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚         â”‚
â”‚   â”‚           â”‚ confirm()   â”‚             â”‚          â”‚         â”‚         â”‚
â”‚   â”‚           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚          â”‚         â”‚         â”‚
â”‚   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚             â”‚             â”‚          â”‚         â”‚         â”‚
â”‚   â”‚           â”‚             â”‚             â”‚          â”‚         â”‚         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ® Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ Ğ¸Ğ³Ñ€Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             GAME STATE DIAGRAM                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     /start      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚    IDLE     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â–¶â”‚    SETTINGS     â”‚                      â”‚
â”‚   â”‚             â”‚                  â”‚                 â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚ â€¢ Mode          â”‚                      â”‚
â”‚                                    â”‚ â€¢ Difficulty    â”‚                      â”‚
â”‚                                    â”‚ â€¢ Rounds        â”‚                      â”‚
â”‚                                    â”‚ â€¢ Questions     â”‚                      â”‚
â”‚                                    â”‚ â€¢ Time          â”‚                      â”‚
â”‚                                    â”‚ â€¢ Theme         â”‚                      â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                             â”‚                              â”‚
â”‚                                             â”‚ complete                     â”‚
â”‚                                             â–¼                              â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                                    â”‚  REGISTRATION   â”‚                      â”‚
â”‚                                    â”‚                 â”‚                      â”‚
â”‚                                    â”‚ â€¢ Join/Leave    â”‚                      â”‚
â”‚                                    â”‚ â€¢ Captain       â”‚                      â”‚
â”‚                                    â”‚ â€¢ Countdown     â”‚                      â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                             â”‚                              â”‚
â”‚                                             â”‚ start_game                   â”‚
â”‚                                             â–¼                              â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚       â”‚   GENERATING    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   ROUND_START   â”‚                      â”‚
â”‚       â”‚   QUESTIONS     â”‚           â”‚                 â”‚                      â”‚
â”‚       â”‚                 â”‚           â”‚ â€¢ Generate Q's  â”‚                      â”‚
â”‚       â”‚ â€¢ OpenAI call   â”‚           â”‚ â€¢ Setup state   â”‚                      â”‚
â”‚       â”‚ â€¢ Validation    â”‚           â”‚ â€¢ Participants  â”‚                      â”‚
â”‚       â”‚ â€¢ Parsing       â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚                              â”‚
â”‚                â”‚                             â”‚                              â”‚
â”‚                â”‚ questions_ready             â”‚                              â”‚
â”‚                â–¼                             â”‚                              â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚                              â”‚
â”‚       â”‚   ASKING        â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚       â”‚   QUESTION      â”‚                                                   â”‚
â”‚       â”‚                 â”‚                                                   â”‚
â”‚       â”‚ â€¢ Display Q     â”‚                                                   â”‚
â”‚       â”‚ â€¢ Start timer   â”‚                                                   â”‚
â”‚       â”‚ â€¢ Await answers â”‚                                                   â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                â”‚                                                           â”‚
â”‚                â”‚ answer_received                                           â”‚
â”‚                â–¼                                                           â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚       â”‚   PROCESSING    â”‚                                                   â”‚
â”‚       â”‚   ANSWERS       â”‚                                                   â”‚
â”‚       â”‚                 â”‚                                                   â”‚
â”‚       â”‚ â€¢ Fuzzy match   â”‚                                                   â”‚
â”‚       â”‚ â€¢ Score calc    â”‚                                                   â”‚
â”‚       â”‚ â€¢ Fast bonus    â”‚                                                   â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                â”‚                                                           â”‚
â”‚                â”‚ all_answered                                              â”‚
â”‚                â–¼                                                           â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚       â”‚   NEXT_QUESTION â”‚â”€â”€â”€â”€â”€â”€â”€â”€ â–¶â”‚   ROUND_END     â”‚                      â”‚
â”‚       â”‚                 â”‚more_q's  â”‚                 â”‚                      â”‚
â”‚       â”‚ â€¢ Q index++     â”‚         â”‚ â€¢ Show results  â”‚                      â”‚
â”‚       â”‚ â€¢ Continue      â”‚         â”‚ â€¢ Statistics    â”‚                      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ â€¢ Next round?   â”‚                      â”‚
â”‚                â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                â”‚                           â”‚                              â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                       next_question        â”‚ more_rounds                   â”‚
â”‚                                           â–¼                              â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                                  â”‚   GAME_END      â”‚                      â”‚
â”‚                                  â”‚                 â”‚                      â”‚
â”‚                                  â”‚ â€¢ Final results â”‚                      â”‚
â”‚                                  â”‚ â€¢ Rankings      â”‚                      â”‚
â”‚                                  â”‚ â€¢ Statistics    â”‚                      â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                           â”‚                              â”‚
â”‚                                           â”‚ cleanup                      â”‚
â”‚                                           â–¼                              â”‚
â”‚                                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                                  â”‚     IDLE        â”‚                      â”‚
â”‚                                  â”‚                 â”‚                      â”‚
â”‚                                  â”‚ Ready for new   â”‚                      â”‚
â”‚                                  â”‚ game            â”‚                      â”‚
â”‚                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§  Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ² OpenAI Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         OPENAI INTEGRATION COMPONENTS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        PROMPT ENGINEERING                               â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚   SYSTEM_PROMPT     â”‚   â”‚   build_openai_     â”‚   â”‚   EXAMPLES      â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚   prompt()          â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ "Ğ¢Ñ‹ AI-Ğ²ĞµĞ´ÑƒÑ‰Ğ¸Ğ¹      â”‚   â”‚                     â”‚   â”‚ GOOD_QUESTION   â”‚â”‚â”‚
â”‚  â”‚  â”‚ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾   â”‚   â”‚ â€¢ Theme injection   â”‚   â”‚ BAD_QUESTION    â”‚â”‚â”‚
â”‚  â”‚  â”‚ ĞºĞ²Ğ¸Ğ·Ğ°. Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞ¹    â”‚   â”‚ â€¢ Difficulty setup  â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ½Ñ‹Ğµ  â”‚   â”‚ â€¢ History avoidance â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹..."         â”‚   â”‚ â€¢ Format enforce    â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                          API INTERACTION                                â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚   Request Builder   â”‚   â”‚   Response Parser   â”‚   â”‚   Error Handler â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Model: gpt-4o     â”‚   â”‚ â€¢ JSON extraction   â”‚   â”‚ â€¢ HTTP errors   â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Max tokens: 1024  â”‚   â”‚ â€¢ Validation        â”‚   â”‚ â€¢ API errors    â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Temperature: 0.2  â”‚   â”‚ â€¢ Duplicate check   â”‚   â”‚ â€¢ Fallbacks     â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Headers setup     â”‚   â”‚ â€¢ Question objects  â”‚   â”‚ â€¢ Retry logic   â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                        HISTORY MANAGEMENT                               â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚   get_questions_    â”‚   â”‚   add_question_     â”‚   â”‚   Duplicate     â”‚â”‚â”‚
â”‚  â”‚  â”‚   history()         â”‚   â”‚   to_history()      â”‚   â”‚   Prevention    â”‚â”‚â”‚
â”‚  â”‚  â”‚                     â”‚   â”‚                     â”‚   â”‚                 â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Theme filter      â”‚   â”‚ â€¢ Insert new Q      â”‚   â”‚ â€¢ Normalize     â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Limit recent      â”‚   â”‚ â€¢ Timestamp         â”‚   â”‚ â€¢ Compare       â”‚â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Return list       â”‚   â”‚ â€¢ Theme tag         â”‚   â”‚ â€¢ Filter        â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ANSWER PROCESSING FLOW                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User Reply â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚      â”‚                                                                   â”‚ â”‚
â”‚      â–¼                                                                   â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Message Handler   â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Check if reply    â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Validate user     â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Check answered    â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Team mode check   â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼                                                             â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚ â”‚
â”‚  â”‚   is_answer_        â”‚â”€â”€â”€â”€â–¶â”‚   normalize_answer  â”‚                    â”‚ â”‚
â”‚  â”‚   correct()         â”‚     â”‚                     â”‚                    â”‚ â”‚
â”‚  â”‚                     â”‚     â”‚ â€¢ Lower case        â”‚                    â”‚ â”‚
â”‚  â”‚ Main logic entry    â”‚     â”‚ â€¢ Strip whitespace  â”‚                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ â€¢ Replace Ñ‘â†’Ğµ       â”‚                    â”‚ â”‚
â”‚            â”‚                 â”‚ â€¢ Replace Ğ¹â†’Ğ¸       â”‚                    â”‚ â”‚
â”‚            â–¼                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Exact Match       â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ user_norm ==        â”‚                                                 â”‚ â”‚
â”‚  â”‚ correct_norm        â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼ (if not exact)                                              â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Length Check      â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ Both >= 3 chars     â”‚                                                 â”‚ â”‚
â”‚  â”‚ else return False   â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼                                                             â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   High Similarity   â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ SequenceMatcher     â”‚                                                 â”‚ â”‚
â”‚  â”‚ similarity >= 0.85  â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼ (if not high similarity)                                    â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Word Containment  â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ user_norm in        â”‚                                                 â”‚ â”‚
â”‚  â”‚ correct_norm OR     â”‚                                                 â”‚ â”‚
â”‚  â”‚ correct_norm in     â”‚                                                 â”‚ â”‚
â”‚  â”‚ user_norm           â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼ (if not contained)                                          â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Word Intersection â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ Split into words    â”‚                                                 â”‚ â”‚
â”‚  â”‚ Check if all user   â”‚                                                 â”‚ â”‚
â”‚  â”‚ words are in        â”‚                                                 â”‚ â”‚
â”‚  â”‚ correct OR vice     â”‚                                                 â”‚ â”‚
â”‚  â”‚ versa               â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼ (if no intersection)                                        â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Individual Word   â”‚                                                 â”‚ â”‚
â”‚  â”‚   Similarity        â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ For each word pair  â”‚                                                 â”‚ â”‚
â”‚  â”‚ check if similarity â”‚                                                 â”‚ â”‚
â”‚  â”‚ >= 0.85             â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼                                                             â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Result & Scoring  â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Store answer      â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Calculate time    â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Fast bonus check  â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Update scores     â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚            â”‚                                                             â”‚ â”‚
â”‚            â–¼                                                             â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚ â”‚
â”‚  â”‚   Response to User  â”‚                                                 â”‚ â”‚
â”‚  â”‚                     â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Confirmation      â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Wait status       â”‚                                                 â”‚ â”‚
â”‚  â”‚ â€¢ Next question     â”‚                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚ â”‚
â”‚                                                                          â”‚ â”‚
â”‚                                                                          â”‚ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚                        EXAMPLE CASES                                â”‚ â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚ â”‚
â”‚  â”‚  "Ğ ĞµĞ°Ğ»" + "Ğ ĞµĞ°Ğ» ĞœĞ°Ğ´Ñ€Ğ¸Ğ´" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… MATCH     â”‚ â”‚ â”‚
â”‚  â”‚  (Word containment: "Ñ€ĞµĞ°Ğ»" in "Ñ€ĞµĞ°Ğ» Ğ¼Ğ°Ğ´Ñ€Ğ¸Ğ´")                       â”‚ â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚ â”‚
â”‚  â”‚  "ĞœĞµÑÑĞ¸" + "Ğ›Ğ¸Ğ¾Ğ½ĞµĞ»ÑŒ ĞœĞµÑÑĞ¸" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… MATCH     â”‚ â”‚ â”‚
â”‚  â”‚  (Word containment: "Ğ¼ĞµÑÑĞ¸" in "Ğ»Ğ¸Ğ¾Ğ½ĞµĞ»ÑŒ Ğ¼ĞµÑÑĞ¸")                    â”‚ â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚ â”‚
â”‚  â”‚  "Ğ“Ñ€ĞµĞ½Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ" + "Ğ“Ñ€Ğ¸Ğ½Ğ»Ğ°Ğ½Ğ´Ğ¸Ñ" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âœ… MATCH     â”‚ â”‚ â”‚
â”‚  â”‚  (High similarity: 0.91 >= 0.85)                                   â”‚ â”‚ â”‚
â”‚  â”‚                                                                     â”‚ â”‚ â”‚
â”‚  â”‚  "Ğ˜Ğ²Ğ°Ğ½" + "ĞŸĞµÑ‚Ñ€" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ âŒ NO MATCH  â”‚ â”‚ â”‚
â”‚  â”‚  (No similarity, containment, or intersection)                     â”‚ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° API Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ¾Ğ²

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ |
|-----------|--------|----------|-----------|
| **questions.py** | `openai_generate_questions()` | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· OpenAI | theme, round_num, chat_id, difficulty, questions_count |
| **questions.py** | `build_openai_prompt()` | ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ° Ğ´Ğ»Ñ OpenAI | theme, round_num, questions_per_round, history_text, difficulty |
| **questions.py** | `openai_check_answers()` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· OpenAI | theme, questions, answers |
| **game/logic.py** | `start_round()` | Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° | context, chat_id |
| **game/logic.py** | `ask_next_question()` | ĞŸĞ¾ĞºĞ°Ğ· ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ° | context, chat_id |
| **game/logic.py** | `question_timeout()` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ° | context |
| **game/logic.py** | `finish_round()` | Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ Ñ€Ğ°ÑƒĞ½Ğ´Ğ° | context, chat_id |
| **handlers/messages.py** | `answer_message_handler()` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ | update, context |
| **handlers/messages.py** | `is_answer_correct()` | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° | user_answer, correct_answer |
| **models/game_state.py** | `get_game_state()` | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¸Ğ³Ñ€Ñ‹ | chat_id |
| **models/game_state.py** | `add_user_answer()` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ | user_id, username, answer_text, is_correct |
| **db.py** | `get_questions_history()` | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² | theme, limit |
| **db.py** | `add_question_to_history()` | Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ° Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ | theme, question |

---

**Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼:** 2025-07-10  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** Quiz Bot 2.0 UML  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ